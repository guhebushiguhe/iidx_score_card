(function(e){function t(t){for(var r,o,s=t[0],u=t[1],l=t[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h2",[e._v("IIDX查分测试")]),n("div",{staticClass:"box search-box"},[n("span",[e._v("DJName ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.djName,expression:"djName"}],attrs:{type:"text"},domProps:{value:e.djName},on:{input:function(t){t.target.composing||(e.djName=t.target.value)}}}),n("span",[e._v("lv ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.lv,expression:"lv"}],attrs:{type:"text"},domProps:{value:e.lv},on:{input:function(t){t.target.composing||(e.lv=t.target.value)}}}),n("button",{attrs:{type:"button"},on:{click:e.getProfiles}},[e._v("搜索")])]),e.profiles?n("div",{staticClass:"box profiles-box"},[n("p",[n("span",[e._v("DJName: "+e._s(e.profiles.djName))])]),n("p",[e._v(" SP Rank: "+e._s(e.profiles.sp.rank)+", Plays: "+e._s(e.profiles.sp.plays)+", DJ Points: "+e._s(e.profiles.sp.djPoints)+" ")]),e._v(" DP Rank: "+e._s(e.profiles.dp.rank)+", Plays: "+e._s(e.profiles.dp.plays)+", DJ Points: "+e._s(e.profiles.dp.djPoints)+" ")]):e._e(),n("div",{staticClass:"box score-box"},[e.isLoading?n("p",[e._v("加载中，请耐心等候···")]):e._e(),e.scores.length>0&&!e.isLoading?n("ul",e._l(e.scores,(function(t){return n("li",{key:t.label,staticClass:"score"},[n("span",[e._v(e._s(t.label))]),n("span",[e._v(e._s(t.value))])])})),0):e._e()])])},i=[],o=n("2909"),s=n("1da1"),u=(n("d81d"),n("4de4"),n("caad"),n("2532"),n("b680"),n("b64b"),n("96cf"),{name:"App",components:{},data:function(){return{djName:"",lv:"",isLoading:!1,profiles:null,qpros:{_id:"XXXX",_etag:"XXXX",head:"XXXX",hair:"XXXX",hand:"XXXX",face:"XXXX",body:"XXXX"},scores:[],scoresData:{},idsList:{},gradeList:[{grade:"MAX",min:1,max:2},{grade:"MAX-",min:.9445,max:1},{grade:"AAA",min:.8888,max:.9445},{grade:"AA",min:.7777,max:.8888},{grade:"A",min:.6666,max:.7777},{grade:"B",min:.5555,max:.6666},{grade:"C",min:.4444,max:.5555},{grade:"D",min:.3333,max:.4444},{grade:"E",min:.2222,max:.3333},{grade:"F",min:.2222,max:0}]}},methods:{getProfiles:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,o,s,u,l,c,p,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.djName,""!=n){t.next=3;break}return t.abrupt("return");case 3:if(r=e.idsList,a=r[n]||null,i=e.scoresData,!r[n]){t.next=9;break}return e.parseScores(i[a]),t.abrupt("return");case 9:return e.profiles=null,e.scores=[],e.isLoading=!0,t.next=14,e.$axios.getProfiles(n);case 14:o=t.sent,s=o["_items"][0],u=s.dj_name,l=s.iidx_id,c=s.sp,p=s.dp,d=s._id,e.idsList[n]=d,e.profiles={djName:u,iidxID:l,sp:{rank:c.rank,plays:c.play,djPoints:c.dj_points},dp:{rank:p.rank,plays:p.play,djPoints:p.dj_points}},e.$forceUpdate(),e.getScores();case 20:case"end":return t.stop()}}),t)})))()},getScores:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,s,u,l,c,p,d,f,m,_,g,v;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.idsList[e.djName]||null,r=null,a=null,i={_items:[],_links:{},_related:{charts:[],music:[],profiles:[]}};case 4:return t.next=6,e.$axios.getScores(n,a);case 6:p=t.sent,d=p._items,f=p._links,m=p._related,_=m.charts,g=m.music,v=m.profiles,(s=i._items).push.apply(s,Object(o["a"])(d)),(u=i._related.charts).push.apply(u,Object(o["a"])(_)),(l=i._related.music).push.apply(l,Object(o["a"])(g)),(c=i._related.profiles).push.apply(c,Object(o["a"])(v)),r=f._next,a=p._items[249]?p._items[249]._id:null;case 15:if(r){t.next=4;break}case 16:e.isLoading=!1,e.scoresData[n]=i,e.parseScores(i);case 19:case"end":return t.stop()}}),t)})))()},parseScores:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o,s,u,l,c,p,d,f,m,_,g,v,h,b,C,x;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.gradeList,a=e._items,e._links,i=e._related,o=t.lv,s=[],s=o&&""!=o?i.charts.filter((function(e){var t=e.rating;return t==o})).map((function(e){return e["_id"]})):i.charts.map((function(e){return e["_id"]})),u=a.filter((function(e){return s.includes(e["chart_id"])})),l=i.profiles[0]["dj_name"],c=u.length,p=u.filter((function(e){return"FULL_COMBO"==e.lamp})).length,d=u.filter((function(e){return"EX_HARD_CLEAR"==e.lamp})).length,f=u.filter((function(e){return"HARD_CLEAR"==e.lamp})).length,m=u.filter((function(e){return"CLEAR"==e.lamp})).length,_=u.filter((function(e){return"ASSIST_CLEAR"==e.lamp})).length,g=u.filter((function(e){return"EASY_CLEAR"==e.lamp})).length,v=u.filter((function(e){return"FAILED"==e.lamp})).length,h=((c-v)/c*100).toFixed(2)+"%",b={djName:l,totalCount:c,FCCount:p,EXHCCount:d,HCCount:f,NCCount:m,ACCount:_,ECCount:g,FCount:v,clearRate:h},r.map((function(e){b[e.grade]=u.filter((function(t){return t.grade>=e.min&&t.grade<e.max})).length})),C={djName:"DJ NAME",totalCount:"lv.".concat(o||"ALL"),FCCount:"FC",EXHCCount:"EXHC",HCCount:"HC",NCCount:"NC",ACCount:"AC",ECCount:"EC",FCount:"Failed",clearRate:"CLEAR RATE",MAX:"MAX","MAX-":"MAX-",AAA:"AAA",AA:"AA",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F"},x=[],Object.keys(C).map((function(e){x.push({label:C[e],value:b[e]})})),t.scores=x,t.$forceUpdate();case 23:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getProfiles(this.djName)}}),l=u,c=(n("5c0b"),n("2877")),p=Object(c["a"])(l,a,i,!1,null,null,null),d=p.exports,f=(n("d3b7"),n("bc3a")),m=n.n(f);m.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",m.a.defaults.headers.authorization="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJ0b2tlbiIsImlhdCI6MTYxMTU5NTY3MSwic3ViIjoiNjQyMDQ2MjYxQHFxLmNvbSIsInNjb3BlIjoibWFjaGluZV9hY2Nlc3Mgcml2YWxfd3JpdGUgc2V0dGluZ3NfcmVhZCBzZXR0aW5nc193cml0ZSJ9.stRjxVQB_-0nkJnJf4o2ZNGyQGUmOI4RddUKC5BEKZ4",m.a.defaults.baseURL="https://arcana.nu",m.a.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)})),m.a.interceptors.response.use((function(e){return e.data}),(function(e){return console.log(e),Promise.reject(e)}));var _=m.a;function g(e){return _.get("/api/v1/iidx/27/profiles/",{params:{dj_name:e}})}function v(e,t){return _.get("/api/v1/iidx/27/player_bests/",{params:t?{profile_id:e,__pos:t}:{profile_id:e}})}var h={getProfiles:g,getScores:v};r["a"].config.productionTip=!1,r["a"].prototype.$axios=h,new r["a"]({render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"9c0c":function(e,t,n){}});
//# sourceMappingURL=app.d0ada0c1.js.map