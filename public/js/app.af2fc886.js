(function(e){function t(t){for(var r,i,l=t[0],o=t[1],c=t[2],u=0,d=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,l=1;l<a.length;l++){var o=a[l];0!==n[o]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var p=o;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("p",{staticClass:"time"},[e._v(e._s((new Date).toLocaleString())),a("span",{domProps:{innerHTML:e._s("&nbsp;&nbsp;&nbsp;&nbsp;")}}),e._v("v1.01")]),a("h2",{staticClass:"title"},[e._v("IIDX查分器")]),a("div",{staticClass:"box search-box"},[a("span",[e._v("DJName ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.djName,expression:"djName"}],ref:"nameInp",attrs:{type:"text",disabled:e.isLoading},domProps:{value:e.djName},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getProfiles(t)},input:function(t){t.target.composing||(e.djName=t.target.value)}}}),a("span",[e._v("lv ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.lv,expression:"lv"}],attrs:{type:"text",disabled:e.isLoading},domProps:{value:e.lv},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getProfiles(t)},input:function(t){t.target.composing||(e.lv=t.target.value)}}}),a("button",{attrs:{type:"button",disabled:e.isLoading},on:{click:e.getProfiles}},[e._v("搜索")]),a("br"),e._l(e.playStyleList,(function(t){return a("span",{key:t.value},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.playStyle,expression:"playStyle"}],staticClass:"radio",attrs:{type:"radio",id:t.value,disabled:e.isLoading},domProps:{value:t.value,checked:e._q(e.playStyle,t.value)},on:{change:function(a){e.playStyle=t.value}}}),e._v(" "+e._s(t.label)+" ")])])}))],2),e.isNameSelectShow?a("div",{staticClass:"box profiles-select"},[a("p",{staticClass:"msg"},[e._v("存在重名账号，请选择账号继续")]),e._l(e.profiles,(function(t,r){return a("div",{key:r,staticClass:"profile-card",on:{click:function(a){return e.continueGetProfile(t)}}},[a("p",[a("span",[e._v("DJName: "),a("span",{staticClass:"djName"},[e._v(e._s(t.dj_name))])])]),"SINGLE"==e.playStyle||"ALL"==e.playStyle?a("p",[e._v(" SP Rank: "+e._s(t.sp.rank)+", Plays: "+e._s(t.sp.plays)+", DJ Points: "+e._s(t.sp.dj_points)+" ")]):e._e(),"DOUBLE"==e.playStyle||"ALL"==e.playStyle?a("p",[e._v(" DP Rank: "+e._s(t.dp.rank)+", Plays: "+e._s(t.dp.plays)+", DJ Points: "+e._s(t.dp.dj_points)+" ")]):e._e()])}))],2):e._e(),e.profile?a("div",{staticClass:"box profiles-box"},[a("p",[a("span",[e._v("DJName: "),a("span",{staticClass:"djName"},[e._v(e._s(e.profile.dj_name))])])]),"SINGLE"==e.playStyle||"ALL"==e.playStyle?a("p",[e._v(" SP Rank: "+e._s(e.profile.sp.rank)+", Plays: "+e._s(e.profile.sp.plays)+", DJ Points: "+e._s(e.profile.sp.dj_points)+" ")]):e._e(),"DOUBLE"==e.playStyle||"ALL"==e.playStyle?a("p",[e._v(" DP Rank: "+e._s(e.profile.dp.rank)+", Plays: "+e._s(e.profile.dp.plays)+", DJ Points: "+e._s(e.profile.dp.dj_points)+" ")]):e._e()]):e._e(),a("div",{staticClass:"box score-box"},[e.isLoading?a("p",[e._v("加载中，请耐心等候···")]):e._e(),e.scores.length>0&&!e.isLoading?a("ul",e._l(e.scores,(function(t,r){return a("li",{key:t.label,staticClass:"score-li"},[a("span",[e._v(e._s(t.label))]),a("span",{staticClass:"score"},[e._v(e._s(t.value))]),e.oldScores.length>0?a("span",{staticClass:"plus"},[e._v(e._s(e.parsePlus(t.value,e.oldScores[r].value)))]):e._e()])})),0):e._e()])])},s=[],i=a("5530"),l=a("2909"),o=a("1da1"),c=(a("d81d"),a("4de4"),a("caad"),a("2532"),a("b680"),a("b64b"),a("96cf"),{name:"App",components:{},data:function(){return{djName:"",lv:"ALL",playStyle:"ALL",isLoading:!1,isNameSelectShow:!1,profiles:null,profile:null,qpros:{_id:"XXXX",_etag:"XXXX",head:"XXXX",hair:"XXXX",hand:"XXXX",face:"XXXX",body:"XXXX"},scores:[],oldScores:[],profilesData:{},scoresData:{},oldScoresData:{},idsList:{},playStyleList:[{label:"ALL",value:"ALL"},{label:"SP",value:"SINGLE"},{label:"DP",value:"DOUBLE"}],gradeList:[{grade:"MAX",min:1,max:2},{grade:"MAX-",min:.9445,max:1},{grade:"AAA",min:.8888,max:.9445},{grade:"AA",min:.7777,max:.8888},{grade:"A",min:.6666,max:.7777},{grade:"B",min:.5555,max:.6666},{grade:"C",min:.4444,max:.5555},{grade:"D",min:.3333,max:.4444},{grade:"E",min:.2222,max:.3333},{grade:"F",min:.2222,max:0}],lampList:["FULL_COMBO","EX_HARD_CLEAR","HARD_CLEAR","CLEAR","ASSIST_CLEAR","EASY_CLEAR","FAILED"]}},computed:{labelList:function(){var e=this.lv;return{ALL_TEMP:"lv.".concat(e||"ALL"),FULL_COMBO:"FC",EX_HARD_CLEAR:"EXHC",HARD_CLEAR:"HC",CLEAR:"NC",ASSIST_CLEAR:"AC",EASY_CLEAR:"EC",FAILED:"Failed",clearRate:"CLEAR RATE",MAX:"MAX","MAX-":"MAX-",AAA:"AAA",AA:"AA",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F"}}},methods:{getProfiles:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i,l,o,c,p,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.djName,""!=a){t.next=4;break}return alert("请输入DJ NAME"),t.abrupt("return");case 4:if(r=e.lv,e.lv=""==r?"ALL":r,n=e.idsList,s=n[a]||null,i=e.scoresData,l=e.oldScoresData,!n[a]){t.next=18;break}return o=e.profilesData[s],e.getSingleProfile(o),e.scores=e.parseScores(i[s]),c=e.beforeToday(l[s]),e.oldScores=e.parseScores(c),e.$forceUpdate(),t.abrupt("return");case 18:return e.profile=null,e.scores=[],e.isLoading=!0,t.next=23,e.$axios.getProfiles(a);case 23:if(p=t.sent,u=0,!(p._items.length>1)){t.next=31;break}return e.isNameSelectShow=!0,e.isLoading=!1,p._items.sort((function(e,t){var a=new Date(e.access_time).getTime(),r=new Date(t.access_time).getTime();return r-a})),e.profiles=p._items,t.abrupt("return");case 31:d=p["_items"][u],e.getSingleProfile(d),e.getScores();case 34:case"end":return t.stop()}}),t)})))()},getSingleProfile:function(e){this.isNameSelectShow=!1,this.profiles=null,this.profilesData[e._id]=e;var t=e.dj_name,a=e.iidx_id,r=e.sp,n=e.dp,s=e._id;this.idsList[t]=s,this.profile={dj_name:t,iidx_id:a,sp:{rank:r.rank,plays:r.plays,dj_points:r.dj_points},dp:{rank:n.rank,plays:n.plays,dj_points:n.dj_points}},this.$forceUpdate()},getScores:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i,o,c,p,u,d,f,_,m,v,y,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoading=!0,a=e.idsList[e.djName]||null,r=null,n=null,s={_items:[],_links:{},_related:{charts:[],music:[],profiles:[]}};case 5:return t.next=7,e.$axios.getScores(a,n);case 7:u=t.sent,d=u._items,f=u._links,_=u._related,m=_.charts,v=_.music,y=_.profiles,(i=s._items).push.apply(i,Object(l["a"])(d)),(o=s._related.charts).push.apply(o,Object(l["a"])(m)),(c=s._related.music).push.apply(c,Object(l["a"])(v)),(p=s._related.profiles).push.apply(p,Object(l["a"])(y)),r=f._next,n=u._items[249]?u._items[249]._id:null;case 16:if(r){t.next=5;break}case 17:e.isLoading=!1,s._items.map((function(e){var t=s._related.charts.filter((function(t){return t._id==e.chart_id}))[0],a=t.notes;t.play_style;e.grade=e.ex_score/a/2})),e.scoresData[a]=s,e.scores=e.parseScores(s),g=e.beforeToday(s),e.oldScoresData[a]=g,e.oldScores=e.parseScores(g);case 24:case"end":return t.stop()}}),t)})))()},beforeToday:function(e){var t=e._items,a=e._related,r=new Date,n=r.setHours(0,0,0,0),s=t.filter((function(e){return new Date(e.timestamp).getTime()<n})),i={_items:s,_related:a};return i},parseScores:function(e){var t=this.gradeList,a=this.labelList,r=e._items,n=e._related,s=this.lv,l=[],o=["1","2","3","4","5","6","7","8","9","10","11","12"],c=this.playStyle;l="ALL"!=c?n.charts.filter((function(e){return e.play_style==c})).map((function(e){var t=e._id,a=e.rating,r=e.play_style;return{_id:t,rating:a,play_style:r}})):n.charts,s&&"ALL"!=s?o.includes(s)?l=l.filter((function(e){var t=e.rating;return t==s})).map((function(e){return e._id})):alert("lv不合法，请重新输入"):l=l.map((function(e){return e._id}));var p=r.filter((function(e){return l.includes(e["chart_id"])})),u={};this.lampList.map((function(e){u[e]=p.filter((function(t){return t.lamp==e})).length}));var d=u.FAILED,f=p.filter((function(e){return"NO_PLAY"==e.status})).length,_=p.length,m=((_-d-f)/_*100).toFixed(2)+"%",v=Object(i["a"])(Object(i["a"])({ALL_TEMP:_},u),{},{clearRate:m});t.map((function(e){v[e.grade]=p.filter((function(t){return t.grade>=e.min&&t.grade<e.max})).length}));var y=[];return Object.keys(a).map((function(e){y.push({label:a[e],value:v[e]})})),y},continueGetProfile:function(e){this.getSingleProfile(e),this.getScores()},parsePlus:function(e,t){var a=null;return isNaN(e-t)?(a=(parseFloat(e)-parseFloat(t)).toFixed(2),0==a?"":a-0>0?"↑+"+a+"%":"↓"+a+"%"):(a=e-t,0==a?"":a-0>0?"↑+"+a:"↓"+a)}},watch:{djName:function(e,t){e!=t&&(this.djName=e.toUpperCase())},playStyle:function(e,t){e!=t&&""!=this.djName&&this.getProfiles()}},mounted:function(){this.$refs.nameInp.focus()}}),p=c,u=(a("5c0b"),a("2877")),d=Object(u["a"])(p,n,s,!1,null,null,null),f=d.exports,_=(a("d3b7"),a("bc3a")),m=a.n(_);m.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",m.a.defaults.headers.authorization="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJ0b2tlbiIsImlhdCI6MTYxMTU5NTY3MSwic3ViIjoiNjQyMDQ2MjYxQHFxLmNvbSIsInNjb3BlIjoibWFjaGluZV9hY2Nlc3Mgcml2YWxfd3JpdGUgc2V0dGluZ3NfcmVhZCBzZXR0aW5nc193cml0ZSJ9.stRjxVQB_-0nkJnJf4o2ZNGyQGUmOI4RddUKC5BEKZ4",m.a.defaults.baseURL="https://arcana.nu",m.a.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)})),m.a.interceptors.response.use((function(e){return e.data}),(function(e){return console.log(e),Promise.reject(e)}));var v=m.a;function y(e){return v.get("/api/v1/iidx/27/profiles/",{params:{dj_name:e}})}function g(e,t){return v.get("/api/v1/iidx/27/player_bests/",{params:t?{profile_id:e,__pos:t}:{profile_id:e}})}var h={getProfiles:y,getScores:g};r["a"].config.productionTip=!1,r["a"].prototype.$axios=h,new r["a"]({render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"9c0c":function(e,t,a){}});
//# sourceMappingURL=app.af2fc886.js.map